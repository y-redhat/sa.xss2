<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSSè„†å¼±æ€§ãƒ‡ãƒ¢ï¼ˆä¿®æ­£ç‰ˆï¼‰</title>
</head>
<body>
    <h1>ğŸ”“ XSSè„†å¼±æ€§ãƒ‡ãƒ¢ï¼ˆå®‰å…¨ç‰ˆï¼‰</h1>
    <p>ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸç¬é–“ã«æ”»æ’ƒãŒå®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸ</p>

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div style="background: #e6f3ff; padding: 10px; margin: 10px 0;">
        <h3>ğŸ“Š ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿:</h3>
        <div id="userDisplay">
            ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“
        </div>
    </div>

    <!-- è„†å¼±ãªå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
    <div style="border: 2px solid red; padding: 15px; margin: 15px 0;">
        <h2>âŒ è„†å¼±ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç™»éŒ²</h2>
        <input type="text" id="vulnName" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å" value="å±±ç”°å¤ªéƒ">
        <textarea id="vulnBio" placeholder="è‡ªå·±ç´¹ä»‹">é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™</textarea>
        <button onclick="saveVulnerableProfile()">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜</button>
    </div>

    <!-- è„†å¼±ãªæ¤œç´¢æ©Ÿèƒ½ -->
    <div style="border: 2px solid red; padding: 15px; margin: 15px 0;">
        <h2>âŒ è„†å¼±ãªæ¤œç´¢æ©Ÿèƒ½</h2>
        <input type="text" id="vulnSearch" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">
        <button onclick="vulnerableSearch()">æ¤œç´¢</button>
        <div id="searchResults" style="margin-top: 10px;"></div>
    </div>

    <!-- è„†å¼±ãªã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ -->
    <div style="border: 2px solid red; padding: 15px; margin: 15px 0;">
        <h2>âŒ è„†å¼±ãªã‚³ãƒ¡ãƒ³ãƒˆæ¬„</h2>
        <textarea id="vulnComment" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..."></textarea>
        <button onclick="addVulnerableComment()">ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿</button>
        <div id="comments" style="margin-top: 10px;"></div>
    </div>

    <!-- å®‰å…¨ãªå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
    <div style="border: 2px solid green; padding: 15px; margin: 15px 0;">
        <h2>âœ… å®‰å…¨ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç™»éŒ²</h2>
        <input type="text" id="secureName" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å" value="å±±ç”°å¤ªéƒ">
        <textarea id="secureBio" placeholder="è‡ªå·±ç´¹ä»‹">é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™</textarea>
        <button onclick="saveSecureProfile()">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜</button>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆç”¨ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ -->
    <div style="background: #f0f0f0; padding: 15px; margin: 15px 0;">
        <h3>ğŸ§ª ãƒ†ã‚¹ãƒˆç”¨XSSãƒšã‚¤ãƒ­ãƒ¼ãƒ‰:</h3>
        <div>
            <strong>åŸºæœ¬XSS:</strong>
            <code>&lt;script&gt;alert('XSS')&lt;/script&gt;</code>
            <button onclick="copyPayload(this)">ã‚³ãƒ”ãƒ¼</button>
        </div>
        <div>
            <strong>ç”»åƒã‚¿ã‚°æ‚ªç”¨:</strong>
            <code>&lt;img src=x onerror="alert('Hacked')"&gt;</code>
            <button onclick="copyPayload(this)">ã‚³ãƒ”ãƒ¼</button>
        </div>
        <div>
            <strong>ãƒœã‚¿ãƒ³è¿½åŠ :</strong>
            <code>&lt;button onclick="alert('Clicked')"&gt;ã‚¯ãƒªãƒƒã‚¯&lt;/button&gt;</code>
            <button onclick="copyPayload(this)">ã‚³ãƒ”ãƒ¼</button>
        </div>
    </div>

    <script>
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
        let userData = {
            name: "å±±ç”°å¤ªéƒ",
            bio: "é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™",
            balance: 10000,
            isAdmin: false
        };

        // è„†å¼±ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜
        function saveVulnerableProfile() {
            const name = document.getElementById('vulnName').value;
            const bio = document.getElementById('vulnBio').value;
            
            // âŒ å±é™º: innerHTMLã§ãã®ã¾ã¾è¡¨ç¤º
            document.getElementById('userDisplay').innerHTML = `
                <strong>åå‰:</strong> ${name}<br>
                <strong>è‡ªå·±ç´¹ä»‹:</strong> ${bio}<br>
                <strong>æ®‹é«˜:</strong> Â¥${userData.balance.toLocaleString()}<br>
                <strong>ç®¡ç†è€…:</strong> ${userData.isAdmin ? 'ã¯ã„' : 'ã„ã„ãˆ'}
            `;
        }

        // è„†å¼±ãªæ¤œç´¢
        function vulnerableSearch() {
            const query = document.getElementById('vulnSearch').value;
            
            // âŒ å±é™º: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ãã®ã¾ã¾HTMLã«æŒ¿å…¥
            document.getElementById('searchResults').innerHTML = `
                <h4>ã€Œ${query}ã€ã®æ¤œç´¢çµæœ:</h4>
                <p>${query} ã«é–¢ã™ã‚‹çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</p>
            `;
        }

        // è„†å¼±ãªã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
        function addVulnerableComment() {
            const comment = document.getElementById('vulnComment').value;
            
            // âŒ å±é™º: å‹•çš„ã«HTMLã‚’æ§‹ç¯‰
            const commentDiv = document.createElement('div');
            commentDiv.style.border = "1px solid #ccc";
            commentDiv.style.padding = "10px";
            commentDiv.style.margin = "5px 0";
            commentDiv.innerHTML = `
                <strong>åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong>
                <span>${comment}</span>
                <br>
                <small>${new Date().toLocaleString()}</small>
            `;
            
            document.getElementById('comments').appendChild(commentDiv);
            document.getElementById('vulnComment').value = '';
        }

        // å®‰å…¨ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜
        function saveSecureProfile() {
            const name = document.getElementById('secureName').value;
            const bio = document.getElementById('secureBio').value;
            
            // âœ… å®‰å…¨: textContentã‚’ä½¿ç”¨
            const display = document.getElementById('userDisplay');
            display.innerHTML = '';
            
            const nameElem = document.createElement('div');
            nameElem.innerHTML = '<strong>åå‰:</strong> ' + name;
            
            const bioElem = document.createElement('div');
            bioElem.innerHTML = '<strong>è‡ªå·±ç´¹ä»‹:</strong> ' + bio;
            
            const balanceElem = document.createElement('div');
            balanceElem.innerHTML = '<strong>æ®‹é«˜:</strong> Â¥' + userData.balance.toLocaleString();
            
            const adminElem = document.createElement('div');
            adminElem.innerHTML = '<strong>ç®¡ç†è€…:</strong> ' + (userData.isAdmin ? 'ã¯ã„' : 'ã„ã„ãˆ');
            
            display.appendChild(nameElem);
            display.appendChild(bioElem);
            display.appendChild(balanceElem);
            display.appendChild(adminElem);
        }

        // ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        function copyPayload(button) {
            const payload = button.previousElementSibling.textContent;
            navigator.clipboard.writeText(payload).then(() => {
                alert('ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: ' + payload);
            });
        }

        // åˆæœŸè¡¨ç¤º
        saveSecureProfile();
    </script>

    <div style="background: #fff3cd; padding: 15px; margin-top: 20px;">
        <h3>ğŸ“š å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆ</h3>
        <ul>
            <li>XSSã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãŒJavaScriptã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹</li>
            <li>innerHTMLã®ä»£ã‚ã‚Šã«textContentã‚’ä½¿ã†ã“ã¨ã§é˜²å¾¡ã§ãã‚‹</li>
            <li>å¸¸ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’æ¤œè¨¼ãƒ»ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹</li>
        </ul>
        <p style="color: red; font-weight: bold;">
            âš  ã“ã®ãƒšãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®ã¿å®Ÿè¡Œã—ã¦ãã ã•ã„
        </p>
    </div>
</body>
</html>
