<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢</h1>
        <a href="{{ url_for('index') }}">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
        
        <form method="POST">
            <input type="text" name="query" value="{{ query }}" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§æ¤œç´¢" required>
            <button type="submit">æ¤œç´¢</button>
        </form>
        
        {% if query %}
            <h2>æ¤œç´¢çµæœ: "{{ query }}"</h2>
            
            {% if results %}
                <table>
                    <tr>
                        <th>ID</th>
                        <th>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</th>
                        <th>ãƒ¡ãƒ¼ãƒ«</th>
                        <th>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</th>
                    </tr>
                    {% for user in results %}
                    <tr>
                        <td>{{ user[0] }}</td>
                        <td>{{ user[1] | safe }}</td>  <!-- âŒ XSSè„†å¼±æ€§ -->
                        <td>{{ user[3] | safe }}</td>  <!-- âŒ XSSè„†å¼±æ€§ -->
                        <td>{{ user[4] | safe }}</td>  <!-- âŒ XSSè„†å¼±æ€§ -->
                    </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>è©²å½“ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
            {% endif %}
            
            <!-- âŒ XSSè„†å¼±æ€§: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚å±é™º -->
            <p><a href="{{ url_for('search') }}?q={{ query }}">ã“ã®æ¤œç´¢çµæœã‚’å…±æœ‰</a></p>
        {% endif %}
        
        <div class="examples">
            <h3>ãƒ†ã‚¹ãƒˆç”¨ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ä¾‹:</h3>
            <ul>
                <li><code>taro</code> - æ­£å¸¸ãªæ¤œç´¢</li>
                <li><code>' OR '1'='1</code> - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³</li>
                <li><code>&lt;script&gt;alert('XSS')&lt;/script&gt;</code> - XSS</li>
                <li><code>'; DROP TABLE users; --</code> - ç ´å£Šçš„SQL</li>
            </ul>
        </div>
    </div>
</body>
</html>
